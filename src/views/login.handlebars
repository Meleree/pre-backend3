<h1>{{title}}</h1>

{{#if welcomeMessage}}
Â  <div class="alert alert-success text-center">{{welcomeMessage}}</div>
{{/if}}

{{#if error}}
Â  <div class="alert alert-danger text-center">Credenciales invÃ¡lidas. IntentÃ¡ nuevamente.</div>
{{/if}}

<form id="loginForm" class="login-form">
Â  <div>
Â  Â  <label>Email:</label>
Â  Â  <input type="email" id="email" required />
Â  </div>

Â  <div>
Â  Â  <label>ContraseÃ±a:</label>
Â  Â  <input type="password" id="password" required />
Â  </div>

Â  <button type="submit" class="btn btn-primary">Ingresar</button>
</form>

<p>Â¿No tenÃ©s cuenta? <a href="/register">Registrate acÃ¡</a></p>

<script>
document.getElementById("loginForm").addEventListener("submit", async (e) => {
Â  e.preventDefault();
Â  const email = document.getElementById("email").value.trim();
Â  const password = document.getElementById("password").value.trim();

Â  try {
Â  Â  const response = await fetch("/api/auth/login", { 
Â  Â  Â  method: "POST",
Â  Â  Â  headers: { 
Â  Â  Â  Â  "Content-Type": "application/json",
Â  Â  Â  Â  "Accept": "application/json"
Â  Â  Â  },
Â  Â  Â  body: JSON.stringify({ email, password }),
Â  Â  Â  credentials: "include" // â† Â¡CLAVE!
Â  Â  });

Â  Â  const data = await response.json();

Â  Â  if (response.ok && data.success) {
Â  Â  Â  alert("Inicio de sesiÃ³n exitoso ğŸ˜„");
Â  Â  Â  window.location.href = "/";
Â  Â  } else {
Â  Â  Â  alert(data.message || "Credenciales invÃ¡lidas.");
Â  Â  }
Â  } catch (error) {
Â  Â  console.error("Error al iniciar sesiÃ³n:", error);
Â  Â  alert("Hubo un problema con el inicio de sesiÃ³n.");
Â  }
});
</script>